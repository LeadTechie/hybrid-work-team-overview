---
phase: 01-foundation-data-pipeline
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/types/office.ts
  - src/types/employee.ts
  - src/stores/officeStore.ts
  - src/stores/employeeStore.ts
  - src/data/seedOffices.ts
  - src/data/seedEmployees.ts
  - src/App.tsx
autonomous: true

user_setup:
  - service: geoapify
    why: "Geocoding addresses to coordinates"
    env_vars:
      - name: VITE_GEOAPIFY_KEY
        source: "Geoapify Dashboard -> API Keys (free tier: 3000 requests/day)"
    account_setup:
      - task: "Create free Geoapify account"
        location: "https://myprojects.geoapify.com/register"

must_haves:
  truths:
    - "TypeScript types exist for Office and Employee with all required fields"
    - "Zustand stores persist data to localStorage"
    - "Seed data loads on first app visit (5 offices, 45 employees)"
    - "German characters (umlauts) display correctly in seed data"
  artifacts:
    - path: "src/types/office.ts"
      provides: "Office type definition"
      contains: "interface Office"
    - path: "src/types/employee.ts"
      provides: "Employee type definition"
      contains: "interface Employee"
    - path: "src/stores/officeStore.ts"
      provides: "Office state management"
      exports: ["useOfficeStore"]
    - path: "src/stores/employeeStore.ts"
      provides: "Employee state management"
      exports: ["useEmployeeStore"]
    - path: "src/data/seedOffices.ts"
      provides: "5 German office locations"
      exports: ["generateSeedOffices"]
    - path: "src/data/seedEmployees.ts"
      provides: "45 German employees"
      exports: ["generateSeedEmployees"]
  key_links:
    - from: "src/stores/officeStore.ts"
      to: "src/types/office.ts"
      via: "import type"
      pattern: "import.*Office.*from"
    - from: "src/stores/employeeStore.ts"
      to: "src/types/employee.ts"
      via: "import type"
      pattern: "import.*Employee.*from"
    - from: "src/App.tsx"
      to: "src/stores/officeStore.ts"
      via: "useOfficeStore hook"
      pattern: "useOfficeStore"
---

<objective>
Set up project foundation with TypeScript types, Zustand stores with persistence, and seed data generators for German offices and employees.

Purpose: Establishes the data layer that all import and display features will build upon. Seed data enables immediate testing without manual data entry.
Output: Working Next.js/Vite app with types, stores, and 5 offices + 45 employees loaded on first visit.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-data-pipeline/01-CONTEXT.md
@.planning/phases/01-foundation-data-pipeline/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize project and install dependencies</name>
  <files>package.json, vite.config.ts, tsconfig.json, src/App.tsx, src/main.tsx, index.html</files>
  <action>
Create a new Vite + React + TypeScript project in the repository root. Initialize with:

```bash
npm create vite@latest . -- --template react-ts
```

Install required dependencies per research:
- Core: zustand (state), zod (validation), uuid (IDs)
- Seed data: @faker-js/faker
- CSV (for next plan): papaparse, @types/papaparse
- Geocoding (for next plan): Will be added in Plan 02

```bash
npm install zustand zod uuid @faker-js/faker papaparse
npm install -D @types/papaparse @types/uuid
```

Update App.tsx to render a simple "Hybrid Office Finder" heading. This confirms the app runs.

Create .env.example with:
```
VITE_GEOAPIFY_KEY=your_api_key_here
```
  </action>
  <verify>
Run `npm run dev` - app should start at localhost:5173 with heading visible.
Run `npm run build` - should compile without TypeScript errors.
  </verify>
  <done>
Vite dev server runs, TypeScript compiles, all dependencies installed.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create types and Zustand stores with persistence</name>
  <files>src/types/office.ts, src/types/employee.ts, src/stores/officeStore.ts, src/stores/employeeStore.ts</files>
  <action>
Create Office type in src/types/office.ts:
```typescript
export interface Office {
  id: string;
  name: string;
  address: string;
  city: string;
  coords?: { lat: number; lon: number };
  geocodeStatus: 'pending' | 'success' | 'failed';
}
```

Create Employee type in src/types/employee.ts:
```typescript
export interface Employee {
  id: string;
  name: string;
  address: string;
  team: string;
  department?: string;
  role?: string;
  assignedOffice?: string;
  coords?: { lat: number; lon: number };
  geocodeStatus: 'pending' | 'success' | 'failed';
}
```

Create officeStore with Zustand persist middleware:
- State: offices array
- Actions: setOffices, addOffices (merge per user decision), clearOffices, updateGeocode
- Persist to localStorage key 'office-storage'

Create employeeStore with same pattern:
- State: employees array
- Actions: setEmployees, addEmployees (merge), clearEmployees, updateGeocode
- Persist to localStorage key 'employee-storage'

Both stores should have an `isInitialized` boolean to track if seed data has loaded.
  </action>
  <verify>
Import stores in App.tsx, call useOfficeStore() and useEmployeeStore().
Console.log the store state - should show empty arrays.
Refresh page - stores should still be empty (persistence working).
  </verify>
  <done>
Types compile, stores export correctly, localStorage persistence verified by page refresh.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create seed data generators and load on first visit</name>
  <files>src/data/seedOffices.ts, src/data/seedEmployees.ts, src/App.tsx</files>
  <action>
Create seedOffices.ts with 5 German offices (per CONTEXT.md):
- Frankfurt HQ: Neue Mainzer Str. 52-58, 60311 Frankfurt am Main (50.1109, 8.6821)
- Berlin Office: Unter den Linden 21, 10117 Berlin (52.5200, 13.4050)
- Munich Office: Maximilianstr. 35, 80539 Muenchen (48.1351, 11.5820)
- Hamburg Office: Jungfernstieg 7, 20354 Hamburg (53.5511, 9.9937)
- Duesseldorf Office: Koenigsallee 60, 40212 Duesseldorf (51.2277, 6.7735)

Pre-geocoded coordinates (from research) - no API call needed for seed offices.
Export as `generateSeedOffices(): Office[]`

Create seedEmployees.ts using @faker-js/faker with fakerDE locale:
- Generate 45 employees (per SEED-02: 30-50)
- Use fakerDE.seed(12345) for reproducible data
- 8 teams: Platform, Frontend, Backend, Mobile, DevOps, QA, Data, Security
- 2 departments: Engineering, Product
- Roles: Developer, Senior Developer, Tech Lead, Product Manager, Designer
- Cluster employees near offices (within ~50km): generate coords as office coords + random offset
- Realistic German names using fakerDE.person.fullName()
- German addresses using fakerDE.location.streetAddress(), zipCode(), city()

Export as `generateSeedEmployees(): Employee[]`

Update App.tsx to:
1. Check if stores are empty AND not initialized
2. If empty and not initialized, call generateSeedOffices() and generateSeedEmployees()
3. Set offices and employees in stores, mark as initialized
4. Display count: "5 offices, 45 employees loaded"

Handle German characters properly - Faker generates them automatically with fakerDE.
  </action>
  <verify>
Run `npm run dev`, open browser, check:
1. Console shows 5 offices and 45 employees
2. Employee names include German characters (Muller with umlaut: Mueller, etc.)
3. Refresh page - data persists (not regenerated)
4. Clear localStorage, refresh - data regenerates

Run `npm run build` to confirm no TypeScript errors.
  </verify>
  <done>
5 offices and 45 employees display on page. German characters render correctly. Data persists across refresh. Build succeeds.
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` starts successfully at localhost:5173
2. `npm run build` completes without errors
3. Page shows "5 offices, 45 employees loaded"
4. localStorage contains 'office-storage' and 'employee-storage' keys
5. German umlauts display correctly (check employee names)
6. Page refresh does not regenerate seed data (persistence works)
7. Clear localStorage and refresh - seed data regenerates
</verification>

<success_criteria>
- Project runs with Vite + React + TypeScript
- All dependencies from research installed
- Types exist for Office and Employee
- Zustand stores persist to localStorage
- Seed data (5 offices, 45 employees) loads on first visit
- German characters display correctly
- Data survives page refresh
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-data-pipeline/01-01-SUMMARY.md`
</output>
